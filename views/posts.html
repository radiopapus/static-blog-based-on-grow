{% extends "/views/base.html" %}

{% block lang %}
    <div class="lang text-right">
        {% if doc.locale == 'en' %}
            <a href="/posts/{{doc.slug}}">Русский</a>
        {% else %}
            <a href="/en/posts/{{doc.slug}}">English</a>
        {% endif %}
    </div>
{% endblock %}

{% block main %}
<div class="meta">
    <h1><a href="{{doc.url.path}}">{{_(doc.title)}}</a></h1>
    <div class="attribution attribution-container">
        <div class="attribution-left">
            {{_('Author')}}: {{_(doc.author)}}
        </div>
        <div class="attribution-right">
            {{_('Posted')}}: {{doc.dates.published}}
        </div>
    </div>
</div>
{{doc.html|safe}}
{% set posts = g.docs('posts', locale=doc.locale) %}

{% set doc_prev = doc.prev(posts) %}

<div class="page-nav">
{% if doc_prev %}
<div class="page-nav-prev">
    <a href="{{doc_prev.url.path}}" title="{{_(doc_prev.title)}}">{{_('Prev')}}</a>
</div>
{% endif %}

{% set doc_next = doc.next(posts) %}
{% if doc_next %}
<div class="page-nav-next">
    <a href="{{doc_next.url.path}}" title="{{_(doc_next.title)}}">{{_('Next')}}</a>
</div>
{% endif %}

<h3>{{_('Recent')}}</h3>
<ul>
    {% for post in g.docs('posts', locale=doc.locale)[-9:]|reverse() %}
        {% if post.title != doc.title %}
          {% if post.title != None %}
            <li><a href="{{post.url.path}}">{{_(post.title)}}</a>
          {% endif %}
        {% endif %}
    {% endfor %}
</ul>

</div>
{% endblock %}
